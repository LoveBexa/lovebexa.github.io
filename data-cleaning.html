<!DOCTYPE html>
<html lang="en">

<head>

  <!-- Basic Page Info
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Becky Liu's Portfolio</title>
  <meta name="description" content="Becky Liu's Data Science Portfolio: Data Engineer, Software, Java, Python, Full-Stack, Developer Roles">
  <meta name="author" content="Becky Liu">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="images/favicon.png" />

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link
    href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap"
    rel="stylesheet">
  <!-- ICON FONTS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="stylesheets/ionicons.min.css">
  <link rel="stylesheet" href="fonts/fonts.css">

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="stylesheets/bootstrap.css">
  <link rel="stylesheet" href="stylesheets/slimmenu.css">
  <link rel="stylesheet" href="stylesheets/venobox.css">
  <link rel="stylesheet" href="stylesheets/main.css">
  <link rel="stylesheet" href="stylesheets/main-bg.css">
  <link rel="stylesheet" href="stylesheets/main-responsive.css">

  <!-- LESS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <!-- 
    <link rel="stylesheet/less" type="text/css" href="less/color.less">
    <link rel="stylesheet/less" type="text/css" href="less/fonts.less">
    <script src="less/less.min.js"></script> -->

  <script src="javascripts/libs/modernizr.js"></script>

</head>

<body>


  <!-- Preloader
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <div id="preloader" class="signature-karl">
    <div id="status"></div>
  </div>
  <!-- end : preloader -->


  <!-- mobile only navigation : starts -->
  <nav class="mobile-nav signature-karl">
    <ul class="slimmenu">
      <li>
        <a class="sub-collapser" href="index.html">projects</a>
      </li>
      <li><a href="about.html">about becky</a></li>

      <li><a href="contact.html">say hello</a></li>
    </ul>
  </nav>
  <!-- mobile only navigation : ends -->


  <!-- Header
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <header class="masthead signature-karl white-bg">
    <div class="container-fluid">
      <div class="row">

        <article class="col-md-6">
          <a href="index.html"><img alt="" title="" class="main-logo" src="images/logo.png"></a>
        </article>
        <article class="col-md-6">
          <div class="menu-notification">
            <a class="font3xblack" href="#"><span class="ion-android-menu black"></span></a>
          </div>
          <div class="filter-notification signature-karl">
            <a class="font3xblack" href="#"><span class="ion-shuffle black"></span></a>
          </div>
        </article>

      </div>
    </div>
  </header>
  <!-- end : masthead -->

  <nav class="mastnav signature-karl nav-bg img-bg fullheight">

    <div class="menu-close-notification">
      <a class="font3xblack" href="#"><span class="ion-android-close white"></span></a>
    </div>
    <div class="valign">

      <ul class="main-menu signature-karl">
        <li>
          <a class="main-link font3xblack sub-menu-trigger" href="index.html">projects</a>
        </li>
        <li><a class="main-link font3xblack" href="about.html">about becky</a></li>
        <li><a class="main-link font3xblack" href="contact.html">say hello</a></li>
      </ul>
    </div>
  </nav>

  <!-- end : mastnav -->






  <!-- MASTER CONTENT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <section class="mastwrap signature-karl">

    <div class="inner-wrap container">
      <section class="project-title signature-karl white-bg pad-top-quarter pad-bottom-quarter">
        <h1 class="font3xblack black">Data Cleaning Tool<span class="font3light dark">A program built in Python to
            prepare data ready for visualisation </span></h1>
        <!-- <br><br><img src="images/works/data-analysis.jpg" width="100%"> -->

      </section>



      <section class="hero-text add-top-quarter add-bottom">

        <div class="row">
          <article class="col-md-8">
            <p class="grey">
              This is a prototype application with a GUI for better usability. It cleans, wrangles, combines and reformats multiple .csv files into JSON ready to use for visualisation. The GUI was also built to help a user without coding experience making it an easier process and also more acessible accross the business.
            </p><br>

            <h3 class="font3xblack">Overview</h3>
            <p class="grey">
              This overview diagram shows how the flow of application will be used from loading to exporting. It was gathered that perhaps two separate applications may be need: clean, parsing the data and then loading the data to produce graph visualisations. The application would also benefit from concurrency due to simultaneous tasks needing to be run. First Jupyter Notebooks was used to clean and wrangle the data then the most efficient cleaning methods were chosen for program. 
              <img src="images/project/overview-diagram.png" class="img-responsive">
            </p><br>

            <h3 class="font3xblack">Loading the data</h3>
            <p class="grey">
              Python Pandas library was used to load the data into a DataFrame as this made it easy to quickly view, manipulate and inspect the data closely and easily convert from .csv to DF.<br>
<pre> 
  import pandas as pd
  import numpy as np
  
  # missing values
  missing_values = ["NA", "N/A", "na", r"^\s*$", "", " ", "NaN"]
  columns = 'columns'
  
  # ----- IMPORT CSV FILES ---- #
  
  print("Hello welcome to the data cleaning tool. Please upload your files:")
  inventory_file = input("Please enter the full file location for the inventory file:")
  violation_file = input("Please enter the full file location for the violation file:")
  inspection_file = input("Please enter the full file location for the inspection file:")
  
  inventory = pd.read_csv(inventory_file, keep_default_na=False, na_values=missing_values)
  violation = pd.read_csv(violation_file, keep_default_na=False, na_values=missing_values)
  inspection = pd.read_csv(inspection_file, keep_default_na=False, na_values=missing_values)
</pre>


            <a class="btn btn-signature btn-signature-karl btn-signature-color"
            href="https://github.com/LoveBexa/data-cleaning-tool/blob/master/Jupyter/Cleaning.ipynb" target="new">View Code Snippet</a>
            </p><br>


            <h3 class="font3xblack">Cleaning the data</h3>

            <p class="grey">
              On inspection there were lots of multiple variants of words, differing cases, spaces and extra punchuation. Furthermore, there wasa potential of 3 different files needling to cleaned and merged. Therefore cleaning functions were developed so they can be used multiple times on different datasets.<br>

              <pre>
                # ---- CLEAN FILE ---- #

def clean(df):

    # Dropping data with over 50% null to avoid errors 
    print("...10% Dropping empty cells")
    df.dropna(inplace = True) 

    # Replace NaN, missing values etc with 0
    df.fillna(0)
    print("...20% Neatening missing values")

    print("...30% Stripping spaces")
    # Regex finds spaces 2 or more & changes to 1 and strips space before/after 
    df.columns = [col.strip().replace('  ', ' ') for col in df.columns]

    print("...40% Converting all to uppercase")
    df.columns = [x.upper() for x in df.columns]
    # print(csv_df.columns) to check if it works :)


    if "PE DESCRIPTION" in df:
        print("...60% Slicing out & cleaning seating column")


        # Seating numbers only
        new_seat_col = df['PE DESCRIPTION'].str.extract('.*\((.*)\).*') # print(new_seat_col)

        # Remove seating numbers leave behind rest
        df['PE DESCRIPTION'] = df['PE DESCRIPTION'].str.replace(r" \(.*\)","") # print(pe_list)

        # New headers
        df['SEATING'] = new_seat_col

        # Remove Alpha, Commas, Full stop and Spacing

        df['SEATING'] = df['SEATING'].str.replace('[a-zA-Z,. ]', '')
        # '/^[a-zA-Z0-9,\.\s]*$/'
        # [a-zA-Z]
        
    if "SCORE" in df:
        print("...70% Converting to correct data types")
        df["SCORE"] = df["SCORE"].apply(np.int64) 

    if "ZIP CODES" in df:
        print("...80% Cleaning last bits")
        df["ZIP CODES"] = df["ZIP CODES"].apply(np.int64) 
        # int_df = df["ZIP CODES"].astype(int)

    if "ACTIVITY DATE" in df:
        print("...90% Formatting dates")
        df['ACTIVITY DATE'] =  pd.to_datetime(df['ACTIVITY DATE'], format='%m/%d/%Y')


    print("...100% Done!")
    
    print(df.head(5))

    # print(df.head(5))

    return df


def second_clean(df):
    
    print("...Implementing a second clean")

    
    if "PROGRAM STATUS" in df:
        print("...30% Removing inactive accounts")
        df = df[df['PROGRAM STATUS'] != 'INACTIVE']


    if "ACTIVITY DATE" in df:
        print("...60% Formatting dates")
        df['ACTIVITY DATE'] =  pd.to_datetime(df['ACTIVITY DATE'], format='%m/%d/%Y')

        # this returns only the year
        df['ACTIVITY DATE'] = df['ACTIVITY DATE'].dt.year

    if "SERIAL NUMBER" and "FACILITY ID" in df:
        print("...90% Drop duplicates")
        df = df.drop_duplicates(subset=['ACTIVITY DATE', 'FACILITY ID', 'SERIAL NUMBER'], keep='last')
        
    print(".. 100% Second clean done!")

    return df

              </pre>

            <a class="btn btn-signature btn-signature-karl btn-signature-color"
            href="https://github.com/LoveBexa/data-cleaning-tool/blob/master/Jupyter/Cleaning.ipynb" target="new">View Code Snippet</a>
            </p><br>


                
            <h3 class="font3xblack">Exporting the data</h3>

            <p class="grey">
              The next focus was to allow the user to load the dataset via inputting the file location, clean the data and then reformat/export as a JSON. As the dataset contain over 100,000 isntances JSON file was used because of the low cost of data usage and high parsing speeds. It was decided that all files would be merged into 1 datafile that contained only the useful attributes for the visualisations. The rest were removed<br>
<pre>
  # ---- EXPORT AS JSON ---- #

def export_json(file, type):
    try:
        file_name = input("Please enter a file name you'd like to use:")
        new_json_name = file_name + ".json"
        file.to_json(new_json_name, index='true', orient=type) 

    except NameError:
        print("You have not loaded or cleaned your files to export yet!")
</pre>
            <a class="btn btn-signature btn-signature-karl btn-signature-color"
            href="https://github.com/LoveBexa/data-cleaning-tool/blob/master/Jupyter/Cleaning.ipynb" target="new">View Code Snippet</a>
            </p><br>




            <h3 class="font3xblack">Analysing the data</h3>

            <p class="grey">
              I needed a way of importing the cleaned JSON file to do some descriptive statistics, selecting only relevent headers to find the mean, median, mode and standard deviation.  
              <Br>

                <pre>



# ---- SEATING MEAN, MEDIAN, MODE SCORE ----- #

# making grouped by activity date first, then seating
grouped = df1.groupby(['ACTIVITY DATE', 'SEATING'])


# make activity date by YEAR 
# using score to calculate
group_df1 = grouped['SCORE']


                </pre> 

            <a class="btn btn-signature btn-signature-karl btn-signature-color"
            href="https://github.com/LoveBexa/data-cleaning-tool/blob/master/Jupyter/Wrangling.ipynb" target="new">View Code Snippet</a>
            </p>

        



          </article>
          <article class="col-md-4">
            <ul class="project-spec signature-karl">
              <li class="font3xblack black">Category / <span class="font3light dark">Application</span></li>
              <li class="font3xblack black">Language / <span class="font3light dark">Python</span></li>
              <li class="font3xblack black">Tools / <span class="font3light dark">Jupyter Notebooks, Pandas, Numpy, Tkinter, Matplotlib</span></li>
            </ul>
            <a class="btn btn-signature btn-signature-karl btn-signature-color"
              href="https://github.com/LoveBexa/data-cleaning-tool" target="new">Github Repo</a>
          </article>
        </div>
      </section>


    </div>
    <!-- end : inner-wrap -->




    <section class="project-nav signature-karl silver-bg">
      <div class="container-fluid">
        <div class="row">
          <article class="col-md-12 text-left no-pad">
            <ul class="project-nav-icon-wrap">
              <li><a class="ajax-link" href="project04.html"><img data-no-retina alt="" title=""
                    src="images/prev.svg" /></a></li>
              <li><a class="ajax-link" href="index.html"><img data-no-retina alt="" title=""
                    src="images/grid.svg" /></a></li>
              <li><a class="ajax-link" href="coin-counter.html"><img data-no-retina alt="" title=""
                    src="images/next.svg" /></a></li>
            </ul>
          </article>
        </div>
      </div>
    </section>




    <!-- FOOTER
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <footer class="mastfoot signature-karl white-bg">
      <div class="container-fluid">

        <div class="row">
          <ul class="foot-social col-md-12 text-center">
            <li><a href="https://www.linkedin.com/in/rebekahliu/"><span class="ion-social-linkedin footer"></span></a>
            </li>
            <li><a href="https://twitter.com/bexabot"><span class="ion-social-twitter footer"></span></a></li>
            <li><a href="https://www.instagram.com/lovebexa/"><span class="ion-social-instagram footer"></span></a></li>
            <li><a href="https://www.facebook.com/techybeckyliu"><span class="ion-social-facebook footer"></span></a>
            </li>
          </ul>
        </div>
        <div class="row">
          <article class="credits col-md-12  text-center">
            <p class="font3 dark">Website Made With  &hearts; By <a target="_blank"
                href="http://wwww.houseninetytwo.com">Becky Liu</a>.</p>
          </article>
        </div>

        

      </div>
    </footer>
    <!-- end : mastfoot -->







  </section>
  <!-- end : mastwrap -->





  <!-- End Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->

  <!-- JS
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <script src="javascripts/libs/common.js"></script>
  <script src="javascripts/libs/bootstrap.min.js"></script>
  <script src="javascripts/custom/main.js"></script>
  <script src="javascripts/custom/elements.js"></script>

</body>

</html>
