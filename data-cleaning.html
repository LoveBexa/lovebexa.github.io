<!DOCTYPE html>
<html lang="en">

<head>

  <!-- Basic Page Info
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Becky Liu's Portfolio</title>
  <meta name="description"
    content="Becky Liu's Data Science Portfolio: Data Engineer, Software, Java, Python, Full-Stack, Developer Roles">
  <meta name="author" content="Becky Liu">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="images/favicon.png" />

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link
    href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap"
    rel="stylesheet">
  <!-- ICON FONTS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="stylesheets/ionicons.min.css">
  <link rel="stylesheet" href="fonts/fonts.css">

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="stylesheets/bootstrap.css">
  <link rel="stylesheet" href="stylesheets/slimmenu.css">
  <link rel="stylesheet" href="stylesheets/venobox.css">
  <link rel="stylesheet" href="stylesheets/main.css">
  <link rel="stylesheet" href="stylesheets/main-bg.css">
  <link rel="stylesheet" href="stylesheets/main-responsive.css">

  <!-- LESS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <!-- 
    <link rel="stylesheet/less" type="text/css" href="less/color.less">
    <link rel="stylesheet/less" type="text/css" href="less/fonts.less">
    <script src="less/less.min.js"></script> -->

  <script src="javascripts/libs/modernizr.js"></script>

</head>

<body>


  <!-- Preloader
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <div id="preloader" class="signature-karl">
    <div id="status"></div>
  </div>
  <!-- end : preloader -->


  <!-- mobile only navigation : starts -->
  <nav class="mobile-nav signature-karl">
    <ul class="slimmenu">
      <li>
        <a class="sub-collapser" href="index.html">projects</a>
      </li>
      <li><a href="about.html">about becky</a></li>

      <li><a href="contact.html">say hello</a></li>
    </ul>
  </nav>
  <!-- mobile only navigation : ends -->


  <!-- Header
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <header class="masthead signature-karl white-bg">
    <div class="container-fluid">
      <div class="row">

        <article class="col-md-6">
          <a href="index.html"><img alt="" title="" class="main-logo" src="images/logo.png"></a>
        </article>
        <article class="col-md-6">
          <div class="menu-notification">
            <a class="font3xblack" href="#"><span class="ion-android-menu black"></span></a>
          </div>
          <div class="filter-notification signature-karl">
            <a class="font3xblack" href="#"><span class="ion-shuffle black"></span></a>
          </div>
        </article>

      </div>
    </div>
  </header>
  <!-- end : masthead -->

  <nav class="mastnav signature-karl nav-bg img-bg fullheight">

    <div class="menu-close-notification">
      <a class="font3xblack" href="#"><span class="ion-android-close white"></span></a>
    </div>
    <div class="valign">

      <ul class="main-menu signature-karl">
        <li>
          <a class="main-link font3xblack sub-menu-trigger" href="index.html">projects</a>
        </li>
        <li><a class="main-link font3xblack" href="about.html">about becky</a></li>
        <li><a class="main-link font3xblack" href="contact.html">say hello</a></li>
      </ul>
    </div>
  </nav>

  <!-- end : mastnav -->






  <!-- MASTER CONTENT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <section class="mastwrap signature-karl">

    <div class="inner-wrap container">
      <section class="project-title signature-karl white-bg pad-top-quarter pad-bottom-quarter">
        <h1 class="font3xblack black">Data Cleaning Tool<span class="font3light dark">A program built in Python to
            prepare data ready for visualisation </span></h1>
        <!-- <br><br><img src="images/works/data-analysis.jpg" width="100%"> -->

      </section>



      <section class="hero-text add-top-quarter add-bottom">

        <div class="row">
          <article class="col-md-8">
            <p class="grey">
              This is a prototype application built in Python with a GUI built in Tkinker to prompt user to load a
              dataset, clean it and then export it as a JSON. The GUI was built to make it easier to wrangle data ready
              to load for visualiations.
              <br>
              The client initially needed the program to generate the mean, mode and median for the inspection score per
              year for each type of vendor’s seating and for each ‘zip code’ therefore these functions were built into
              the visualiation tool.<br>
              Furthermore, the client wanted a way to save the cleaned file and enter their own file name.
            </p>

            <h3 class="font3xblack add-top-quarter">Overview</h3>
            <p class="grey">
              This overview diagram shows how the flow of application will be used from loading to exporting. It was
              gathered that perhaps two separate applications may be need: clean, parsing the data and then loading the
              data to produce graph visualisations. The application would also benefit from concurrency due to
              simultaneous tasks needing to be run. First Jupyter Notebooks was used to clean and wrangle the data then
              the most efficient cleaning methods were chosen for program.
              <img src="images/project/overview-diagram.png" class="img-responsive">
            </p>

            <h3 class="font3xblack add-top-quarter">Loading the data</h3>
            <p class="grey">
              Python Pandas library was used to load the data into a DataFrame as this made it easy to quickly view,
              manipulate and inspect the data closely and easily convert from .csv to DF. Using the print and input
              functions allowed the user to enter the file names manually.

            </p>

            <p>
              <a class="btn btn-signature btn-signature-karl btn-signature-color" data-toggle="collapse"
                href="#loadingData" role="button" aria-expanded="false" aria-controls="loadingData">Click For Code </a>
            </p>



            <!-- start: click to tab code -->

            <div class="row add-top-quarter">
              <div class="col">
                <div class="collapse multi-collapse" id="loadingData">
                  <div class="card card-body">
                    <pre>
  import pandas as pd
  import numpy as np
  
  # missing values
  missing_values = ["NA", "N/A", "na", r"^\s*$", "", " ", "NaN"]
  columns = 'columns'
  
  # ----- IMPORT CSV FILES ---- #
  
  print("Hello welcome to the data cleaning tool. Please upload your files:")
  inventory_file = input("Please enter the full file location for the inventory file:")
  violation_file = input("Please enter the full file location for the violation file:")
  inspection_file = input("Please enter the full file location for the inspection file:")
  
  inventory = pd.read_csv(inventory_file, keep_default_na=False, na_values=missing_values)
  violation = pd.read_csv(violation_file, keep_default_na=False, na_values=missing_values)
  inspection = pd.read_csv(inspection_file, keep_default_na=False, na_values=missing_values)
</pre>

                    <a class="btn btn-signature btn-signature-karl btn-signature-color"
                      href="https://github.com/LoveBexa/data-cleaning-tool/blob/master/Jupyter/Cleaning.ipynb"
                      target="new">View Github File</a>

                  </div>
                </div>
              </div>
            </div>

            <!-- end: click to tab code -->


            <h3 class="font3xblack add-top-quarter">Cleaning the data</h3>

            <p class="grey">
              On inspection there were lots of multiple variants of words, differing cases, spaces, dashes and extra
              punchuation. Furthermore, there were 3 different data files needing to be cleaned and merged.
              Therefore cleaning functions were developed so they can be used multiple times on different datasets and
              to create consistency amongst the data for easier wrangling. </p>


            <!-- start: click to tab code -->


            <p>
              <a class="btn btn-signature btn-signature-karl btn-signature-color" data-toggle="collapse"
                href="#cleaningData" role="button" aria-expanded="false" aria-controls="cleaningData">Click For Code
              </a>
            </p>

            <div class="row add-top-quarter">
              <div class="col">
                <div class="collapse multi-collapse" id="cleaningData">
                  <div class="card card-body">
                    <pre>
  # ---- CLEAN FILE ---- #

def clean(df):

# Dropping data with over 50% null to avoid errors 
print("...10% Dropping empty cells")
df.dropna(inplace = True) 

# Replace NaN, missing values etc with 0
df.fillna(0)
print("...20% Neatening missing values")

print("...30% Stripping spaces")
# Regex finds spaces 2 or more & changes to 1 and strips space before/after 
df.columns = [col.strip().replace('  ', ' ') for col in df.columns]

print("...40% Converting all to uppercase")
df.columns = [x.upper() for x in df.columns]
# print(csv_df.columns) to check if it works :)


if "PE DESCRIPTION" in df:
print("...60% Slicing out & cleaning seating column")


# Seating numbers only
new_seat_col = df['PE DESCRIPTION'].str.extract('.*\((.*)\).*') # print(new_seat_col)

# Remove seating numbers leave behind rest
df['PE DESCRIPTION'] = df['PE DESCRIPTION'].str.replace(r" \(.*\)","") # print(pe_list)

# New headers
df['SEATING'] = new_seat_col

# Remove Alpha, Commas, Full stop and Spacing

df['SEATING'] = df['SEATING'].str.replace('[a-zA-Z,. ]', '')
# '/^[a-zA-Z0-9,\.\s]*$/'
# [a-zA-Z]

if "SCORE" in df:
print("...70% Converting to correct data types")
df["SCORE"] = df["SCORE"].apply(np.int64) 

if "ZIP CODES" in df:
print("...80% Cleaning last bits")
df["ZIP CODES"] = df["ZIP CODES"].apply(np.int64) 
# int_df = df["ZIP CODES"].astype(int)

if "ACTIVITY DATE" in df:
print("...90% Formatting dates")
df['ACTIVITY DATE'] =  pd.to_datetime(df['ACTIVITY DATE'], format='%m/%d/%Y')


print("...100% Done!")

print(df.head(5))

# print(df.head(5))

return df


def second_clean(df):

print("...Implementing a second clean")


if "PROGRAM STATUS" in df:
print("...30% Removing inactive accounts")
df = df[df['PROGRAM STATUS'] != 'INACTIVE']


if "ACTIVITY DATE" in df:
print("...60% Formatting dates")
df['ACTIVITY DATE'] =  pd.to_datetime(df['ACTIVITY DATE'], format='%m/%d/%Y')

# this returns only the year
df['ACTIVITY DATE'] = df['ACTIVITY DATE'].dt.year

if "SERIAL NUMBER" and "FACILITY ID" in df:
print("...90% Drop duplicates")
df = df.drop_duplicates(subset=['ACTIVITY DATE', 'FACILITY ID', 'SERIAL NUMBER'], keep='last')

print(".. 100% Second clean done!")

return df

</pre>

                    <a class="btn btn-signature btn-signature-karl btn-signature-color"
                      href="https://github.com/LoveBexa/data-cleaning-tool/blob/master/Jupyter/Cleaning.ipynb"
                      target="new">View Github File</a>

                  </div>
                </div>
              </div>
            </div>

            <!-- end: click to tab code -->



            <h3 class="font3xblack add-top-quarter">Importing/Exporting the data</h3>

            <p class="grey">
              The next focus was to reformat/export as a JSON. As the dataset contain over 100,000 isntances JSON file
              was used
              because of the low cost of data usage and high parsing speeds. It was decided that all files would be
              merged into 1 datafile that contained only the useful attributes for the descriptive statistics and
              visualisations. The rest were
              removed<br>
            </p>

            <p class="grey">
              I needed a way of importing the cleaned JSON file to do some descriptive statistics, selecting only
              relevent headers to find the mean, median, mode and standard deviation. Therefore the input print function
              was used again to allow the user to input the dataset file location.
              <Br>

              <!-- start: click to tab code -->

              <p>
                <a class="btn btn-signature btn-signature-karl btn-signature-color" data-toggle="collapse"
                  href="#exportingData" role="button" aria-expanded="false" aria-controls="exportingData">Click For Code
                </a>
              </p>


              <div class="row add-top-quarter">
                <div class="col">
                  <div class="collapse multi-collapse" id="exportingData">
                    <div class="card card-body">

                      <pre>
# ---- EXPORT AS JSON ---- #

def export_json(file, type):
  try:
      file_name = input("Please enter a file name you'd like to use:")
      new_json_name = file_name + ".json"
      file.to_json(new_json_name, index='true', orient=type) 

  except NameError:
      print("You have not loaded or cleaned your files to export yet!")

                        </pre>

                      <pre>
# ----EXPORT TO JSON  ----- #

export_json(df4_cleaned, columns)

print("Congratulations, your data has been clean and exported into the same folder")
                        </pre>

                      <pre>
import pandas as pd
import numpy as np 

columns = 'columns'
df1_mode =  lambda x:x.value_counts().index[0]

# ---- READING JSON FILE ---- # 
#  Users/bexa/Documents/Compsci/Advanced Programming/Summative/facilities.json

# ask user for json file location
enter_json = input ('Please enter the file location of your cleaned JSON file:')
# read as pandas dataframe
df1 = pd.read_json(enter_json)
                        </pre>

                      <a class="btn btn-signature btn-signature-karl btn-signature-color"
                        href="https://github.com/LoveBexa/data-cleaning-tool/blob/master/Jupyter/Wrangling.ipynb"
                        target="new">View Github File</a>

                    </div>
                  </div>
                </div>
              </div>

              <!-- end: click to tab code -->



              <h3 class="font3xblack add-top-quarter">Analysing the data</h3>

              <p class="grey">
                To produce descriptive statistics the data needed to be wrangled into suitable DataFrame. Groupby
                function
                was used to group the necessary attributes and then Aggregate function was used to find the mean,
                median,
                mode and standard deviation.</p>

              <!-- start: click to tab code -->

              <p>
                <a class="btn btn-signature btn-signature-karl btn-signature-color" data-toggle="collapse"
                  href="#descStats" role="button" aria-expanded="false" aria-controls="descStats">Click For Code
                </a>
              </p>


              <div class="row add-top-quarter">
                <div class="col">
                  <div class="collapse multi-collapse" id="descStats">
                    <div class="card card-body">
                      <pre>
# ---- SEATING MEAN, MEDIAN, MODE SCORE ----- #

# making grouped by activity date first, then seating
grouped = df1.groupby(['ACTIVITY DATE', 'SEATING'])


# make activity date by YEAR 
# using score to calculate
group_df1 = grouped['SCORE']

# Calculating Mode by using value counts then finding the first value in row

# calculating mean, median 
df1_mean = group_df1.agg([('MEAN', 'mean'), ('MEDIAN','median'), ('MODE', df1_mode)])

# turn mean/median/mode groupby table into DataFrame 
df1_1 = pd.DataFrame(df1_mean)

print(df1_1)


# ---- ZIP CODES MEAN, MEDIAN, MODE SCORE ----- #


# making grouped by activity date first, then seating
grouped = df1.groupby(['ACTIVITY DATE', 'ZIP CODES'])

# using score to calculate
group_df2 = grouped['SCORE']

# Calculating Mode by using value counts then finding the first value in row

# calculating mean, median 
df2_mean = group_df2.agg([('MEAN', 'mean'), ('MEDIAN','median'), ('MODE', df1_mode)])

# turn mean/median/mode groupby table into DataFrame 
df2_1 = pd.DataFrame(df2_mean)

print(df2_1)

</pre>

                      <a class="btn btn-signature btn-signature-karl btn-signature-color"
                        href="https://github.com/LoveBexa/data-cleaning-tool/blob/master/Jupyter/wrangling.ipynb"
                        target="new">View Github File</a>

                    </div>
                  </div>
                </div>
              </div>

              <!-- end: click to tab code -->



              <h3 class="font3xblack add-top-quarter">Designing The GUI</h3>

              <p class="grey">
                The client needed a way to input the datafiles visually and clean the data therefore using input fields,
                upload files dialog and buttons was best practise to minimise errors and reduce complication of entering incorrect data. This way the user will only be able to select from given options and load files available on the desktop.

              </p>

              <p class="add-bottom">
              <img src="images/project/clean-tool.jpg" class="col-md-6 img-responsive">

              <img src="images/project/clean-tool-1.jpg" class="col-md-6 img-responsive">
              </p>

              <p class="grey">
                After initial wireframes drawn. Feedback showed that more input fields needed to be added for the
                different data files to make it more intuitive for the end user to know which needed to uploaded and
                where.

                Furthermore, buttons to load the different functions like clean and export made sense so the user had
                more control. A status bar, that would show green message to verify and red message to denote errors, was also later added to provide continuous feedback to user. 
              


               <div class="add-bottom">
                <img src="images/project/wrangling-tool.png" class="img-responsive">

                <img src="images/project/graph-tool.png" class="img-responsive">

               </div>

              </p>

          

 
              <h3 class="font3xblack add-top-quarter">Intergrating Tkinter GUI</h3>
              <p class="grey">
                Tkinter provides a variety of widgets that I needed such as labels, buttons, input fields and checkboxes which were in the GUI wireframes. Furthermore Tkinker has a file dialogue function that can pop-up on click to source files, close the window, provide extra window functionality options. It also was the fastest way to implement the program with a GUI to create a prototype test.
              </p>

              <!-- start: click to tab code -->

<p>
  <a class="btn btn-signature btn-signature-karl btn-signature-color" data-toggle="collapse"
    href="#dataCleaning" role="button" aria-expanded="false" aria-controls="dataCleaning">Click For Code
  </a>
</p>
            

          <div class="row add-top-quarter">
              <div class="col">
                <div class="collapse multi-collapse" id="dataCleaning">
                  <div class="card card-body">
                    <pre>
import tkinter as tk
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt 
import matplotlib.cbook as cbook
import json, os
from tkinter import ttk
from tkinter import *
from tkinter.filedialog import asksaveasfile 
from tkinter.filedialog import asksaveasfilename
from tkinter import filedialog
from tkinter import messagebox
from datetime import datetime

# ------ GLOBAL VARIABLES ------ #

# Change missing values to NaN for consistency
missing_values = ["NA", "N/A", "na", r"^\s*$", "", " ", "NaN"]
# counts value then finds the one that appears the most time (mode)
df1_mode =  lambda x:x.value_counts().index[0]
# Changes to true once file clean has been done at least once
file_cleaned = False
# creating instance of Tk class
window = tk.Tk()
window.title("DATA ANALYSIS TOOL")

# disable windows from resizing
window.resizable(False, False)  

# window sizing
window_height = 450
window_width = 500
screen_width = window.winfo_screenwidth()
screen_height = window.winfo_screenheight()

# Places window in middle of screen
x_cordinate = int((screen_width/2) - (window_width/2))
y_cordinate = int((screen_height/2) - (window_height/2))
window.geometry("{}x{}+{}+{}".format(window_width, window_height, x_cordinate, y_cordinate))


# Adding Tabs to window 
tab_control = ttk.Notebook(window)
cleaning_tab = ttk.Frame(tab_control)
graph_tab = ttk.Frame(tab_control)

# Adding text to tab and styling 
tab_control.add(cleaning_tab, text="1. Clean Data")
tab_control.add(graph_tab, text="2. Generate Graph")
tab_control.pack(expand=1, fill="both")
                      

</pre>

<a class="btn btn-signature btn-signature-karl btn-signature-color"
href="https://github.com/LoveBexa/data-cleaning-tool/blob/master/Jupyter/GUI_Tkinter.ipynb" target="new">View Github File</a>


                  </div>
                </div>
              </div>
            </div>

            <!-- end: click to tab code -->

              




</article>

<article class="col-md-4">
  <ul class="project-spec signature-karl">
    <li class="font3xblack black">Category / <span class="font3light dark">Application</span></li>
    <li class="font3xblack black">Language / <span class="font3light dark">Python</span></li>
              <li class="font3xblack black">Tools / <span class="font3light dark">Jupyter Notebooks, Pandas, Numpy,
                  Tkinter, Matplotlib</span></li>
            </ul>
            <a class="btn btn-signature btn-signature-karl btn-signature-color"
              href="https://github.com/LoveBexa/data-cleaning-tool" target="new">Github Repo</a>
          </article>
          
        </div>
      </section>


    </div>
    <!-- end : inner-wrap -->




    <section class="project-nav signature-karl silver-bg">
      <div class="container-fluid">
        <div class="row">
          <article class="col-md-12 text-left no-pad">
            <ul class="project-nav-icon-wrap">
              <li><a class="ajax-link" href="project04.html"><img data-no-retina alt="" title=""
                    src="images/prev.svg" /></a></li>
              <li><a class="ajax-link" href="index.html"><img data-no-retina alt="" title=""
                    src="images/grid.svg" /></a></li>
              <li><a class="ajax-link" href="coin-counter.html"><img data-no-retina alt="" title=""
                    src="images/next.svg" /></a></li>
            </ul>
          </article>
        </div>
      </div>
    </section>




    <!-- FOOTER
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <footer class="mastfoot signature-karl white-bg">
      <div class="container-fluid">

        <div class="row">
          <ul class="foot-social col-md-12 text-center">
            <li><a href="https://www.linkedin.com/in/rebekahliu/"><span class="ion-social-linkedin footer"></span></a>
            </li>
            <li><a href="https://twitter.com/bexabot"><span class="ion-social-twitter footer"></span></a></li>
            <li><a href="https://www.instagram.com/lovebexa/"><span class="ion-social-instagram footer"></span></a></li>
            <li><a href="https://www.facebook.com/techybeckyliu"><span class="ion-social-facebook footer"></span></a>
            </li>
          </ul>
        </div>
        <div class="row">
          <article class="credits col-md-12  text-center">
            <p class="font3 dark">Website Made With &hearts; By <a target="_blank"
                href="http://wwww.houseninetytwo.com">Becky Liu</a>.</p>
          </article>
        </div>



      </div>
    </footer>
    <!-- end : mastfoot -->







  </section>
  <!-- end : mastwrap -->





  <!-- End Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->

  <!-- JS
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <script src="javascripts/libs/common.js"></script>
  <script src="javascripts/libs/bootstrap.min.js"></script>
  <script src="javascripts/custom/main.js"></script>
  <script src="javascripts/custom/elements.js"></script>

</body>

</html>